(function(t){function e(e){for(var r,i,s=e[0],c=e[1],u=e[2],l=0,d=[];l<s.length;l++)i=s[l],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&d.push(o[i][0]),o[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);p&&p(e);while(d.length)d.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,i=1;i<n.length;i++){var c=n[i];0!==o[c]&&(r=!1)}r&&(a.splice(e--,1),t=s(s.s=n[0]))}return t}var r={},o={app:0},a=[];function i(t){return s.p+"js/"+({about:"about"}[t]||t)+"."+{about:"5258d6f4"}[t]+".js"}function s(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(t){var e=[],n=o[t];if(0!==n)if(n)e.push(n[2]);else{var r=new Promise((function(e,r){n=o[t]=[e,r]}));e.push(n[2]=r);var a,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=i(t);var u=new Error;a=function(e){c.onerror=c.onload=null,clearTimeout(l);var n=o[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+r+": "+a+")",u.name="ChunkLoadError",u.type=r,u.request=a,n[1](u)}o[t]=void 0}};var l=setTimeout((function(){a({type:"timeout",target:c})}),12e4);c.onerror=c.onload=a,document.head.appendChild(c)}return Promise.all(e)},s.m=t,s.c=r,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var p=u;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"02ac":function(t,e,n){},"088f":function(t,e,n){},"09f2":function(t,e,n){},1345:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{staticClass:"iv-modal",attrs:{"class-name":"vertical-center-modal",title:"快速登录",closable:!1,"mask-closable":!1},on:{"on-ok":t.ok,"on-cancel":t.cancel,"on-visible-change":t.visibleChange},model:{value:t.showLogin,callback:function(e){t.showLogin=e},expression:"showLogin"}},[n("Form",{ref:"formLogin",attrs:{model:t.formLogin,rules:t.ruleLogin,"label-width":130}},[n("FormItem",{attrs:{label:"Access Key",prop:"accessKey"}},[n("Row",[n("Col",{attrs:{span:"20"}},[n("Input",{ref:"accessKey",attrs:{type:"text"},model:{value:t.formLogin.accessKey,callback:function(e){t.$set(t.formLogin,"accessKey",e)},expression:"formLogin.accessKey"}})],1)],1)],1),n("FormItem",{attrs:{label:"Secret Key",prop:"secretKey"}},[n("Row",[n("Col",{attrs:{span:"20"}},[n("Input",{attrs:{type:"text"},model:{value:t.formLogin.secretKey,callback:function(e){t.$set(t.formLogin,"secretKey",e)},expression:"formLogin.secretKey"}})],1)],1)],1),n("FormItem",[n("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formLogin")}}},[t._v("登 录")])],1)],1),n("div",{attrs:{slot:"footer"},slot:"footer"})],1)},o=[],a=(n("5ab2"),n("6d57"),n("e10e"),n("f548"),n("cc57"),n("ac9f")),i=n("4062"),s=n("8876"),c=n("41cb");function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){Object(a["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var p={name:"LoginModal",components:{Row:i["Row"],Col:i["Col"],Button:i["Button"],Modal:i["Modal"],Form:i["Form"],FormItem:i["FormItem"],Input:i["Input"]},data:function(){var t=function(t,e,n){""===e?n(new Error("请输入 Access Key")):n()},e=function(t,e,n){""===e?n(new Error("请输入Secret Key")):n()};return{countDown:60,showLogin:!0,formLogin:{accessKey:"ApfrIzxCoK1DwNZO",secretKey:"EJCwlrnv6QZ0PCdvrWGi"},ruleLogin:{accessKey:[{validator:t,trigger:"blur"}],secretKey:[{validator:e,trigger:"blur"}]}}},computed:{},methods:l({},Object(s["c"])(["login"]),{ok:function(){console.info(">>>: OK")},cancel:function(){},visibleChange:function(t){t&&this.$refs.accessKey.focus()},handleSubmit:function(t){var e=this,n=this;this.$refs[t].validate((function(t){t?n.$http.post("api/login",n.formLogin,{headers:{"content-type":"application/x-www-form-urlencoded"}}).then((function(t){var r=t.data;0===r.code?(e.$Message.info(r.msg),n.login(r),console.info("关闭登录窗口"),c["a"].replace({name:"home"}),location.reload()):alert(r.msg)})):e.$Message.error("Fail!")}))}})},d=p,f=(n("f59e"),n("8f93"),n("623f")),m=Object(f["a"])(d,r,o,!1,null,null,null);e["default"]=m.exports},"17c2":function(t,e,n){"use strict";var r=n("7894"),o=n.n(r);o.a},"1a90":function(t,e,n){},"1d84":function(t,e,n){},3138:function(t,e,n){"use strict";var r=n("ea17"),o=n.n(r);o.a},3300:function(t,e,n){},3566:function(t,e,n){"use strict";var r=n("3300"),o=n.n(r);o.a},"3a85":function(t,e,n){"use strict";var r=n("a182"),o=n.n(r);o.a},"41cb":function(t,e,n){"use strict";n("cc57");var r=n("0261"),o=n("1bee"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("poster-layout")],1)},i=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"poster-layout"},[n("top-bar-layout"),n("div",{staticClass:"layout-wrapper"},[n("tool-layout"),n("content-wrapper"),n("setting-layout")],1),n("debug-layout")],1)},c=[],u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-warpper"},[n("div",{staticClass:"canvas-wrapper",class:{"sidebar-extend":t.sidebar.showExtendBar},attrs:{tabindex:"1"},on:{keydown:function(e){return t.keyupHandler(e)},click:t.deactiveAllItem}},[n("div",{staticClass:"canvas-content-wrapper",style:{width:t.w,height:t.h,"background-color":t.BGC,"background-image":t.bgi,"background-repeat":"none","background-size":t.bgs}},[n("div",{staticClass:"canvas-content",on:{click:function(e){return t.switchPanel("canvas")}}},t._l(t.items,(function(t,e){return n("poster-item",{key:e,attrs:{item:t}})})),1)]),n("div",{staticClass:"canvas-tool-bar"},[n("div",{staticClass:"item scale-area"},[n("i",{staticClass:"icon iconfont icon-minus",attrs:{title:"缩小"},on:{click:t.shrink}}),n("p",{staticClass:"scale-num"},[t._v(t._s(t._f("formatPrcent")(t.scale)))]),n("i",{staticClass:"icon iconfont icon-plus",attrs:{title:"放大"},on:{click:t.magnify}})]),t._e()])])])},l=[],p=(n("5ab2"),n("6d57"),n("e10e"),n("ac9f")),d=(n("163d"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"poster-item",attrs:{tabindex:t.item.z,id:t.idKey},on:{click:function(t){t.stopPropagation()},keydown:function(e){return t.keyupHandler(e)}}},[n("vue-drag-resize",{staticClass:"poster-item-vue-drag",style:{"z-index":t.item.z},attrs:{parentLimitation:!0,parentW:t.W,parentH:t.H,w:t.w,h:t.h,x:t.x,y:t.y,minw:t.minw,minh:t.minh,isActive:t.active,aspectRatio:t.aspectRatio},on:{click:function(t){t.stopPropagation()},clicked:function(e){return t.activeItemHandler(t.item.uuid)},resizing:t.resizing,dragging:t.dragging,resizestop:t.resizestop,dragstop:t.dragstop,activated:t.activated,deactivated:t.deactivated}},["text"===t.item.t?n("p",{staticStyle:{height:"100%",width:"100%",border:"none",resize:"none",padding:"0",margin:"0",overflow:"hidden","line-height":"130%"},style:{"background-color":t.item.bgc,color:t.item.c,"font-size":t.fontSize,"text-decoration":t.textDecoration},domProps:{textContent:t._s(t.item.v)}}):t._e(),"image"===t.item.t?n("item-image",{attrs:{item:t.item}}):t._e(),"qrcode"===t.item.t?n("item-qrcode",{attrs:{item:t.item}}):t._e(),"avatar"===t.item.t?n("item-avatar",{attrs:{item:t.item}}):t._e()],1)],1)}),f=[],m=(n("c86c"),n("7b1d")),h=n.n(m),v=n("8876"),b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("img",{staticStyle:{"border-radius":"50%"},style:{width:t.w,height:t.h,border:t.borderStyle},attrs:{src:t.item.v,onerror:t.defaultImg}})},y=[];function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){Object(p["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var O={name:"ItemAvatar",props:{item:{}},data:function(){return{defaultImg:'this.src="'+n("ba68")+'"; this.style.background="#fff"'}},computed:w({},Object(v["b"])(["scale"]),{bw:function(){return 4},bw2:function(){return 2*this.bw},w:function(){return"calc(100%)"},h:function(){return"calc(100%)"},borderStyle:function(){return"1px solid "+this.item.c}})},j=O,P=n("623f"),C=Object(P["a"])(j,b,y,!1,null,"5ebb58de",null),x=C.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("img",{ref:"qrcode",staticClass:"poster-item-qrcode"})},I=[],S=n("5618"),k=n.n(S),D={};function E(t,e){D[t]=e}function K(t,e){var n=D[t];n||console.error("元素不存在!"),n[e]()}var R={name:"ItemQrcode",props:{item:{}},mounted:function(){this.buildQrcode(),E(this.item.uuid,this)},updated:function(){this.buildQrcode()},methods:{buildQrcode:function(){var t=this.item;if(t.v){var e={errorCorrectionLevel:"M",margin:t.p,width:t.w,color:{dark:t.c,light:t.bgc}},n=this.$refs.qrcode,r=t.v+"";k.a.toDataURL(r,e,(function(t,e){if(t)throw t;n.src=e}))}}}},$=R,L=(n("17c2"),Object(P["a"])($,_,I,!1,null,"aba78f5a",null)),M=L.exports,T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("img",{staticClass:"item-image",attrs:{src:t.item.v,onerror:t.defaultImg}})},B=[],U={name:"ItemImage",props:{item:{}},data:function(){return{defaultImg:'this.src="'+n("ba68")+'"; this.style.background="#fff"'}},methods:{}},H=U,A=(n("478d"),Object(P["a"])(H,T,B,!1,null,"5a54a86a",null)),N=A.exports;function q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function z(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?q(Object(n),!0).forEach((function(e){Object(p["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var J={name:"PosterItem",components:{VueDragResize:h.a,ItemAvatar:x,ItemQrcode:M,ItemImage:N},props:{item:{}},data:function(){return{tmpz:0}},updated:function(){},mounted:function(){},computed:z({},Object(v["b"])(["W","H","items","scale"]),{x:function(){return this.item.x*this.scale},y:function(){return this.item.y*this.scale},w:function(){return this.item.w*this.scale},h:function(){return this.item.h*this.scale},active:function(){return this.item.active},idKey:function(){return"pi-"+this.item.uuid},minw:function(){var t=60,e=this.item.t;return"image"===e&&(t=50),"qrcode"===e&&(t=50),"avatar"===e&&(t=50),t*this.scale},minh:function(){var t=20,e=this.item.t;return"image"===e&&(t=50),"qrcode"===e&&(t=50),"avatar"===e&&(t=50),t*this.scale},aspectRatio:function(){this.item.t;return!1},fontSize:function(){return this.item.s*this.scale+"px"},textDecoration:function(){return this.item.st>=1?"line-through":"none"}}),methods:z({},Object(v["c"])(["activeItemAndShowProperty","removeItem","itemDown","itemUp","copyItem","pasteItem","savePoster"]),{fixed:function(t){return Number(t.toFixed(0))},scaleAndFixed:function(t){return this.fixed(t/this.scale)},resizing:function(t){this.item.w=this.scaleAndFixed(t.width),this.item.h=this.scaleAndFixed(t.height)},dragging:function(t){this.item.x=this.scaleAndFixed(t.left),this.item.y=this.scaleAndFixed(t.top)},resizestop:function(t){},dragstop:function(t){},activated:function(){},deactivated:function(){},keyupHandler:function(t){var e=t.altKey?5:t.metaKey?10:1,n=this.item;switch(t.code){case"ArrowLeft":n.x-=e;break;case"ArrowRight":n.x+=e;break;case"ArrowUp":t.shiftKey?this.itemUp(n.uuid):n.y-=e;break;case"ArrowDown":t.shiftKey?this.itemDown(n.uuid):n.y+=e;break;case"Delete":case"Backspace":this.removeItem(n.uuid);break;case"KeyC":(t.ctrlKey||t.metaKey)&&this.copyItem(n.uuid);break;case"KeyV":(t.ctrlKey||t.metaKey)&&this.pasteItem(n.uuid);break;case"KeyS":(t.ctrlKey||t.metaKey)&&(this.savePoster(),t.preventDefault());break}},activeItemHandler:function(t){document.getElementById(this.idKey).focus(),this.activeItemAndShowProperty(t)}})},F=J,W=(n("3566"),Object(P["a"])(F,d,f,!1,null,null,null)),G=W.exports;function Q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function V(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Q(Object(n),!0).forEach((function(e){Object(p["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var X={name:"ContentWrapper",props:{},components:{PosterItem:G,VueDragResize:h.a},filters:{formatPrcent:function(t){return(100*Number(t)).toFixed(0)+" %"}},data:function(){return{}},computed:V({},Object(v["b"])(["W","H","BGC","BGURL","items","scale","sidebar"]),{w:function(){return this.W+"px"},h:function(){return this.H+"px"},bgs:function(){return this.w+" "+this.h},bgi:function(){return this.BGURL?"url('"+this.BGURL+"')":"none"}}),methods:V({},Object(v["c"])(["deactiveAllItem","switchPanel","adjustScale","autoScale","savePoster"]),{magnify:function(){this.adjustScale(.05)},shrink:function(){this.adjustScale(-.05)},resizing:function(){},keyupHandler:function(t){switch(t.code){case"KeyS":(t.ctrlKey||t.metaKey)&&(this.savePoster(),t.preventDefault());break;case"KeyR":(t.ctrlKey||t.metaKey)&&location.reload();break}}})},Y=X,Z=(n("3138"),Object(P["a"])(Y,u,l,!1,null,"94cd48d4",null)),tt=Z.exports,et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tool-layout"},[n("div",{staticClass:"nav-layout"},t._l(t.tools,(function(e,r){return n("div",{key:r,staticClass:"nav-item",class:{active:t.activeIndex==r},attrs:{title:t.itemTitle(r,e.name)},on:{click:function(n){return t.choiceItem(e,r)}}},["帮助"===e.name?n("a",{attrs:{href:"https://gitee.com/psoho/fast-poster",target:"_blank"}},[n("span",{staticClass:"icon iconfont",class:[e.icon]}),n("div",{staticClass:"nav-item-text"},[n("span",[t._v(t._s(e.name))])])]):[n("span",{staticClass:"icon iconfont",class:[e.icon]}),n("div",{staticClass:"nav-item-text"},[n("span",[t._v(t._s(e.name))])])]],2)})),0),n("my-poster-list",{ref:"myPosterList",staticClass:"tool-extend-wrapper",class:{active:t.showExtendBarMyPosters}}),n("div",{staticClass:"tool-extend-wrapper",class:{active:t.showExtendBarLevels}},[n("div",{staticClass:"panel panel-layers mt20 "},[n("div",{staticClass:"panel-layers-items"},t._l(t.items,(function(t,e){return n("setting-layer",{key:e,attrs:{item:t}})})),1)])]),n("div",{staticClass:"preview-picture"},[n("div",{directives:[{name:"viewer",rawName:"v-viewer",value:{movable:!1},expression:"{movable: false}"}],ref:"images",staticClass:"images"},[n("img",{ref:"showImg"})]),n("Modal",{attrs:{width:"800"},model:{value:t.showCodeModal,callback:function(e){t.showCodeModal=e},expression:"showCodeModal"}},[n("p",{attrs:{slot:"header"},slot:"header"},[n("span",[t._v("示例代码")])]),n("div",{staticStyle:{"text-align":"center"}},[n("Tabs",{attrs:{value:"java"}},[n("TabPane",{attrs:{label:"Java",name:"java"}},[n("java-code")],1),n("TabPane",{attrs:{label:"Python",name:"python"}},[n("python-code")],1),n("TabPane",{attrs:{label:"cURL",name:"curl"}},[n("curl-code")],1),n("TabPane",{attrs:{label:"JS",name:"JS"}},[n("js-code")],1)],1)],1)])],1)],1)},nt=[],rt=n("4062"),ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"my-poster-list"},[n("div",{staticClass:"picture-container"},t._l(t.posters,(function(e){return n("div",{key:e.id,staticClass:"my-poster-item",attrs:{title:"点击切换海报"},on:{click:function(n){return t.selectPoster(e)}}},[n("div",{staticClass:"item-title"},[n("span",{staticClass:"title"},[t._v(t._s(e.name))]),n("span",{staticClass:"btn-delete icon iconfont icon-delete1",attrs:{title:"删除海报"},on:{click:function(n){return n.stopPropagation(),t.deletePoster(e)}}}),n("span",{staticClass:"btn-copy icon iconfont icon-copy",attrs:{title:"复制海报"},on:{click:function(n){return n.stopPropagation(),t.copyPoster(e)}}})]),n("img",{staticClass:"poster-preview-img",class:{selected:e.id===t.cp.id},attrs:{src:e.preview}})])})),0)])},at=[];function it(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function st(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?it(Object(n),!0).forEach((function(e){Object(p["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):it(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ct={name:"MyPosterList",data:function(){return{cp:{id:0}}},computed:st({},Object(v["b"])(["posters","items"])),methods:st({},Object(v["c"])(["logout","changePoster","newPoster","reloadMyPoster"]),{selectPoster:function(t){var e=this;if(this.cp.id!==t.id){if(0==this.items.length&&0==this.cp.id)return this.cp=t,void this.changePoster(t);this.$Modal.confirm({title:"温馨提示",content:"<p>确定要切换海报[".concat(t.name," ]吗？</p>"),onOk:function(){e.cp=t,e.changePoster(t)}})}},deletePoster:function(t){var e=this;this.$Modal.confirm({title:"温馨提示",content:"<p>确定要删除海报[".concat(t.name," ]吗？</p>"),onOk:function(){e.$http.delete("api/user/posters/"+t.id,{},{headers:{"content-type":"application/x-www-form-urlencoded"}}).then((function(t){var n=t.data;e.reloadMyPoster(),e.$Message.info(n.msg)}))}})},copyPoster:function(t){var e=this;console.info("复制海报: "+t.name),this.$http.post("api/user/posters/copy/"+t.id,{},{headers:{"content-type":"application/x-www-form-urlencoded"}}).then((function(t){var n=t.data;e.reloadMyPoster(),e.$Message.info(n.msg)}))}})},ut=ct,lt=(n("c3fa"),Object(P["a"])(ut,ot,at,!1,null,"5532a15a",null)),pt=lt.exports,dt=n("926c"),ft=n.n(dt),mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"setting-layer",class:{active:t.item.uuid==t.ciuuid},style:{order:t.item.z},attrs:{tabindex:"1",id:t.idKey,title:"按上下方向键移动元素层次"},on:{click:t.clickHandler,keydown:t.keypressHandler}},[n("span",{staticClass:"mr8 icon iconfont",class:["icon-"+t.item.t]}),n("span",{class:{warn:!t.item.vd}},[t._v(t._s(t._f("fvd")(t.item.vd)))])])},ht=[];function vt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function bt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?vt(Object(n),!0).forEach((function(e){Object(p["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var yt={name:"SettingLayer",props:{item:{}},computed:bt({},Object(v["b"])(["ciuuid"]),{idKey:function(){return"layer-"+this.item.uuid}}),filters:{fvd:function(t){return t||"未设置动态参数"}},methods:bt({},Object(v["c"])(["activeItemDontShow","itemDown","itemUp"]),{clickHandler:function(){document.getElementById("layer-"+this.item.uuid).focus(),this.activeItemDontShow(this.item.uuid)},keypressHandler:function(t){switch(t.code){case"ArrowDown":this.itemDown(this.item.uuid);break;case"ArrowUp":this.itemUp(this.item.uuid);break}}})},gt=yt,wt=(n("f881"),Object(P["a"])(gt,mt,ht,!1,null,"ea6e23f0",null)),Ot=wt.exports,jt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"text-align":"left"}},[n("pre",{staticClass:"code language-java line-numbers",domProps:{innerHTML:t._s(t.html)}},[t._v("      "),n("span"),t._v("\n    ")]),n("Button",{attrs:{id:"btnCopyJava",type:"primary"}},[t._v("复制")])],1)},Pt=[],Ct=n("e7c9"),xt=n.n(Ct),_t=(n("d74b"),n("f348")),It=n.n(_t);function St(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function kt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?St(Object(n),!0).forEach((function(e){Object(p["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):St(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Dt={name:"JavaCode",components:{Button:rt["Button"]},computed:kt({},Object(v["b"])(["items","accessKey","secretKey","posterId"]),{html:function(){var t=xt.a.highlight(this.code(),xt.a.languages.java,"java");return t}}),mounted:function(){var t=this,e=new It.a("#btnCopyJava",{text:function(){return t.code()}});e.on("success",(function(){t.$Message.info("复制成功")}))},methods:{down:function(){console.info("下载")},code:function(){var t="";this.items.forEach((function(e){e.vd&&(t+='        params.put("'.concat(e.vd,'", "').concat(e.v,'");\n'))})),t=t||"        // 暂未指定任何动态参数\n";var e='import java.util.HashMap;\nimport com.alibaba.fastjson.JSON;\nimport com.alibaba.fastjson.JSONObject;\nimport okhttp3.*;\nimport org.apache.commons.io.FileUtils;\n\nimport java.io.File;\nimport java.io.IOException;\nimport java.util.Map;\nimport java.util.concurrent.TimeUnit;\n\npublic class PosterClientDemo {\n\n    public static void main(String[] args) {\n\n        // 创建海报客户端对象\n        PosterClient posterClient = new PosterClient("'.concat(window.API_URL,'", "').concat(this.accessKey,'", "').concat(this.secretKey,'");\n\n        // 构造海报参数\n        HashMap<String, String> params = new HashMap<>();\n').concat(t,'\n        // 海报ID\n        String posterId = "').concat(this.posterId,'";\n\n        // 获取下载地址\n        String url = posterClient.getUrl(posterId, params);\n        System.out.println("url=" + url);\n\n        // 保存到本地\n        posterClient.saveToPath(url, "temp.png");\n\n    }\n\n}\n\nclass PosterClient {\n\n    final static OkHttpClient okHttpClient = new OkHttpClient.Builder().connectTimeout(6, TimeUnit.SECONDS).build();\n    private static final String USER_AGENT = "PosterClient-V2.0.0";\n\n    /**\n     * 接入点\n     */\n    private String endpoint;\n    /**\n     * 访问KEY\n     */\n    private String accessKey;\n    /**\n     * 访问密码\n     */\n    private String secretKey;\n\n    public PosterClient(String endpoint, String accessKey, String secretKey) {\n\n        this.accessKey = accessKey;\n        this.secretKey = secretKey;\n\n        endpoint = endpoint.trim();\n        if (endpoint.endsWith("/")) {\n            endpoint = endpoint.substring(0, endpoint.length() - 1);\n        }\n        this.endpoint = endpoint;\n\n    }\n\n    /**\n     * 获取海报访问地址\n     *\n     * @param posterId 海报ID\n     * @param params   参数列表\n     * @return String\n     */\n    public String getUrl(String posterId, Map<String, String> params) {\n        if (params == null) {\n            params = new HashMap<>();\n        }\n        params.put("accessKey", this.accessKey);\n        params.put("secretKey", this.secretKey);\n        params.put("posterId", posterId);\n\n        String url = this.endpoint + "/api/link";\n\n        MediaType mediaType = MediaType.parse("application/json");\n        String json = JSON.toJSONString(params, true);\n        RequestBody body = RequestBody.create(mediaType, json);\n        Request request = new Request.Builder()\n                .url(url)\n                .post(body)\n                .addHeader("User-Agent", USER_AGENT)\n                .addHeader("Content-Type", "application/json")\n                .addHeader("cache-control", "no-cache")\n                .build();\n\n        try {\n            Response response = okHttpClient.newCall(request).execute();\n            String jsonR = response.body().string();\n            JSONObject o = JSONObject.parseObject(jsonR);\n            if (o.getInteger("code") == 0) {\n                url = o.getString("url");\n            } else {\n                throw new RuntimeException("获取海报链接异常: " + o.getString("msg"));\n            }\n\n            return url.startsWith("http") ? url : endpoint + url;\n        } catch (IOException e) {\n            throw new RuntimeException("获取海报链接异常", e);\n        }\n    }\n\n    /**\n     * 获取海报数据\n     *\n     * @param url\n     * @return\n     */\n    public byte[] getData(String url) {\n        try {\n            Request request = new Request.Builder()\n                    .url(url)\n                    .addHeader("User-Agent", USER_AGENT)\n                    .get()\n                    .build();\n            Response response = okHttpClient.newCall(request).execute();\n            return response.body().bytes();\n        } catch (Exception e) {\n            throw new RuntimeException("获取海报数据异常", e);\n        }\n    }\n\n    /**\n     * 保存海报到文件\n     *\n     * @param url\n     * @param path\n     */\n    public void saveToPath(String url, String path) {\n        try {\n            byte[] data = getData(url);\n            FileUtils.writeByteArrayToFile(new File(path), data);\n        } catch (IOException e) {\n            new RuntimeException("保存海报到文件", e);\n        }\n    }\n\n}\n');return e}}},Et=Dt,Kt=(n("64d1"),Object(P["a"])(Et,jt,Pt,!1,null,"2f413738",null)),Rt=Kt.exports,$t=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"text-align":"left"}},[n("pre",{staticClass:"code language-python line-numbers",domProps:{innerHTML:t._s(t.html)}},[t._v("      "),n("span"),t._v("\n    ")]),n("Button",{attrs:{id:"btnCopyPython",type:"primary"}},[t._v("复制")])],1)},Lt=[];n("3267");function Mt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Tt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Mt(Object(n),!0).forEach((function(e){Object(p["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Bt={name:"PythonCode",components:{Button:rt["Button"]},computed:Tt({},Object(v["b"])(["items","accessKey","secretKey","posterId"]),{html:function(){var t=xt.a.highlight(this.code(),xt.a.languages.python,"python");return t}}),mounted:function(){var t=this,e=new It.a("#btnCopyPython",{text:function(){return t.code()}});e.on("success",(function(){t.$Message.info("复制成功")}))},methods:{down:function(){console.info("下载")},code:function(){var t="";this.items.forEach((function(e){e.vd&&(t+='    params["'.concat(e.vd,'"]="').concat(e.v,'"\n'))})),t=t||"    # 暂未指定任何动态参数\n";var e="import requests\nimport json\n\nclass posterapi():\n\n    def __init__(self, endpoint: str, accessKey: str, secretKey: str):\n        if endpoint.endswith(\"/\"):\n            endpoint = endpoint[0:-1]\n        self.endpoint = endpoint\n        self.accessKey = accessKey\n        self.secretKey = secretKey\n\n    def getUrl(self, posterId: str, params: dict = {}):\n        params = dict(params)\n        params['posterId'] = posterId\n        params['accessKey'] = self.accessKey\n        params['secretKey'] = self.secretKey\n        url = f\"{self.endpoint}/api/link\"\n        headers = {\n            'Content-Type': 'application/json'\n        }\n        payload = json.dumps(params)\n        response = requests.request(\"POST\", url, headers=headers, data=payload)\n        link = response.json()['url']  # type:str\n        if not link.startswith('http'):\n            link = self.endpoint + link\n        self.link = link\n        return link\n\n    def save(self, filename='tmp.jpg'):\n        response = requests.request(\"GET\", self.link)\n        with open(filename, mode='wb') as f:\n            f.write(response.content)\n\nif __name__ == '__main__':\n    api = posterapi('".concat(window.API_URL,"', '").concat(this.accessKey,"', '").concat(this.secretKey,"')\n    params = {}\n").concat(t,"\n    url = api.getUrl('").concat(this.posterId,"', params)\n    print(url)\n    api.save()");return e}}},Ut=Bt,Ht=(n("83cb"),Object(P["a"])(Ut,$t,Lt,!1,null,"7bea08a0",null)),At=Ht.exports,Nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"text-align":"left"}},[n("pre",{staticClass:"code language-shell line-numbers",domProps:{innerHTML:t._s(t.html)}},[t._v("      "),n("span"),t._v("\n    ")]),n("Button",{attrs:{id:"btnCopyCurl",type:"primary"}},[t._v("复制")])],1)},qt=[];n("2955");function zt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Jt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?zt(Object(n),!0).forEach((function(e){Object(p["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ft={name:"CurlCode",components:{Button:rt["Button"]},computed:Jt({},Object(v["b"])(["items","accessKey","secretKey","posterId"]),{html:function(){var t=xt.a.highlight(this.code(),xt.a.languages.bash,"bash");return t}}),mounted:function(){var t=this,e=new It.a("#btnCopyCurl",{text:function(){return t.code()}});e.on("success",(function(){t.$Message.info("复制成功")}))},methods:{down:function(){console.info("下载")},code:function(){var t={};this.items.filter((function(t){return t.vd})).forEach((function(e){t[e.vd]=e.v})),t["accessKey"]=this.accessKey,t["secretKey"]=this.secretKey,t["posterId"]=this.posterId,t=JSON.stringify(t,"","  ");var e="curl --location --request POST '".concat(window.API_URL,"api/link' \\\n--header 'Content-Type: application/json' \\\n--data-raw '").concat(t,"'");return e}}},Wt=Ft,Gt=(n("aa98"),Object(P["a"])(Wt,Nt,qt,!1,null,"ff143094",null)),Qt=Gt.exports,Vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"text-align":"left"}},[n("pre",{staticClass:"code language-shell line-numbers",domProps:{innerHTML:t._s(t.html)}},[t._v("      "),n("span"),t._v("\n    ")]),n("Button",{attrs:{id:"btnCopyJS",type:"primary"}},[t._v("复制")]),n("a",{attrs:{href:t.link}},[t._v(t._s(t.link))])],1)},Xt=[];n("d917");function Yt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Zt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Yt(Object(n),!0).forEach((function(e){Object(p["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var te={name:"JS",components:{Button:rt["Button"]},computed:Zt({},Object(v["b"])(["items","accessKey","secretKey","posterId"]),{html:function(){var t=xt.a.highlight(this.code(),xt.a.languages.javascript,"javascript");return t}}),data:function(){return{link:""}},mounted:function(){var t=this,e=new It.a("#btnCopyJS",{text:function(){return t.code()}});e.on("success",(function(){t.$Message.info("复制成功")}))},methods:{down:function(){console.info("下载")},code:function(){var t={};this.items.filter((function(t){return t.vd})).forEach((function(e){t[e.vd]=e.v})),t["accessKey"]=this.accessKey,t["secretKey"]=this.secretKey,t["posterId"]=this.posterId,t=JSON.stringify(t,"","  ");var e='// 复制后，粘贴在浏览器控制台即可运行\nvar myHeaders = new Headers();\nmyHeaders.append("Content-Type", "application/json");\n\nvar raw = JSON.stringify('.concat(t,");\n\nvar requestOptions = {\n  method: 'POST',\n  headers: myHeaders,\n  body: raw,\n  redirect: 'follow'\n};\n\nfetch(\"").concat(window.API_URL,"api/link\", requestOptions)\n  .then(response => response.json())\n  .then(result => console.log(result, result.url))\n  .catch(error => console.log('error', error));");return e}}},ee=te,ne=(n("c715"),Object(P["a"])(ee,Vt,Xt,!1,null,"4fcaecda",null)),re=ne.exports;function oe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ae(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?oe(Object(n),!0).forEach((function(e){Object(p["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ie={name:"ToolLayout",components:{PythonCode:At,CurlCode:Qt,JavaCode:Rt,JsCode:re,Modal:rt["Modal"],Tabs:rt["Tabs"],TabPane:rt["TabPane"],MyPosterList:pt,SettingLayer:Ot},data:function(){return{showModal:!1,showCodeModal:!1,activeIndex:0,lastActiveIndex:-1,showExtendBarMyPosters:!0,showExtendBarLevels:!1,tools:[{name:"我的海报",icon:"icon-template",active:!1},{name:"图层",icon:"icon-level",active:!1},{name:"文本",t:"text",icon:"icon-text",active:!1},{name:"二维码",t:"qrcode",icon:"icon-qrcode",active:!1},{name:"图片",t:"image",icon:"icon-image",active:!1},{name:"头像",t:"avatar",icon:"icon-avatar",active:!1},{name:"代码",icon:"icon-code",active:!1},{name:"预览",icon:"icon-preview1",active:!1},{name:"下载",icon:"icon-download",active:!1},{name:"帮助",icon:"icon-help",active:!1}]}},computed:ae({},Object(v["b"])(["json","W","H","sidebar","items"])),created:function(){this.reloadMyPoster()},methods:ae({},Object(v["c"])(["addItem","reloadMyPoster"]),{itemTitle:function(t,e){return t>=2&&t<=4?"点击添加到设计器":e},isExtendItem:function(t){return 0==this.activeIndex||1==this.activeIndex},choiceItem:function(t,e){if(this.activeIndex=e,t.t&&this.addItem({t:t.t,name:t.name}),this.isExtendItem(e)&&(this.showExtendBarMyPosters="我的海报"===t.name&&!this.showExtendBarMyPosters,this.showExtendBarLevels="图层"===t.name&&!this.showExtendBarLevels,this.sidebar.showExtendBar=this.showExtendBarMyPosters||this.showExtendBarLevels),"预览"===t.name){var n=this.$refs.showImg,r=this,o=this.json,a=new XMLHttpRequest;a.withCredentials=!0,a.open("POST",window.PREVIEW_URL,!0),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("POSTER-API-TOKEN",localStorage.getItem("token")),a.responseType="blob",a.onload=function(){if(200==this.status){var t=this.response;n.onload=function(t){var e=r.$el.querySelector(".images").$viewer;e.show()},n.src=window.URL.createObjectURL(t)}401==this.status&&alert("请登录后再操作")},a.send(o)}if("下载"===t.name){var i=this,s=new XMLHttpRequest;s.withCredentials=!0,s.open("POST",window.PREVIEW_URL,!0),s.setRequestHeader("Content-Type","application/json"),s.setRequestHeader("POSTER-API-TOKEN",localStorage.getItem("token")),s.responseType="blob",s.onload=function(){if(200==this.status){var t=this.response;ft()(t,i.$store.state.p.name+".jpg","","image/png")}401==this.status&&alert("请登录后再操作")},s.send(this.json)}"代码"===t.name&&(this.showCodeModal=!0),"我的海报"===t.name&&this.showExtendBarMyPosters&&this.reloadMyPoster(),t.name}})},se=ie,ce=(n("d1fa"),Object(P["a"])(se,et,nt,!1,null,"471d1794",null)),ue=ce.exports,le=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"property-layout"},[n("div",{staticClass:"title"},[n("div",{staticClass:"item",class:{active:"item"==t.currentPanel},on:{click:function(e){return t.switchPanel("item")}}},[n("p",[t._v("属性设置")])]),n("div",{staticClass:"item",class:{active:"canvas"==t.currentPanel},on:{click:function(e){return t.switchPanel("canvas")}}},[n("p",[t._v("海报设置")])])]),n("div",{directives:[{name:"show",rawName:"v-show",value:"canvas"==t.currentPanel,expression:"currentPanel == 'canvas' "}],staticClass:"canvas-setting"},[n("div",{staticClass:"panel"},[n("Row",{staticClass:"mt10"},[n("Col",{staticClass:"lh32",attrs:{span:"6"}},[t._v("\n                    名称\n                ")]),n("Col",{attrs:{span:"16"}},[n("Input",{model:{value:t.$store.state.p.name,callback:function(e){t.$set(t.$store.state.p,"name",e)},expression:"$store.state.p.name"}})],1)],1),n("Row",[n("Col",{staticClass:"lh32",attrs:{span:"6"}},[t._v("\n                格式\n              ")]),n("Col",{staticClass:"lh32",attrs:{span:"16"}},[n("RadioGroup",{model:{value:t.$store.state.p.type,callback:function(e){t.$set(t.$store.state.p,"type",e)},expression:"$store.state.p.type"}},[n("Radio",{attrs:{label:"png"}},[n("span",[t._v("png")])]),n("Radio",{attrs:{label:"jpeg"}},[n("span",[t._v("jpeg")])])],1)],1)],1),n("Row",{directives:[{name:"show",rawName:"v-show",value:"jpeg"===t.$store.state.p.type,expression:"$store.state.p.type === 'jpeg'"}]},[n("Col",{staticClass:"lh32",attrs:{span:"6"}},[t._v("\n                质量\n              ")]),n("Col",{attrs:{span:"16"}},[n("Slider",{attrs:{max:100,min:30},model:{value:t.$store.state.p.quality,callback:function(e){t.$set(t.$store.state.p,"quality",e)},expression:"$store.state.p.quality"}})],1)],1),n("Divider",{attrs:{orientation:"left"}},[n("Tooltip",{attrs:{content:"修改海报尺寸"}},[t._v("\n                    海报尺寸\n                ")])],1),n("Row",{staticClass:"mt20"},[n("Col",{attrs:{span:"6"}},[t._v(" ")]),n("Col",{attrs:{span:"6"}},[t._v(" ")]),n("Col",{staticClass:"lh32",attrs:{span:"6"}},[t._v("高度")]),n("Col",{staticClass:"lh32",attrs:{span:"6"}},[t._v("宽度")])],1),n("Row",[n("Col",{attrs:{span:"12"}},[n("Dropdown",{on:{"on-click":t.itemChange}},[n("Button",{attrs:{type:"primary"}},[t._v("\n                            常用尺寸\n                            "),n("Icon",{attrs:{type:"ios-arrow-down"}})],1),n("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[n("DropdownItem",{attrs:{name:"640,1008"}},[t._v("640 x 1008")]),n("DropdownItem",{attrs:{name:"720,1280"}},[t._v("720 x 1280")]),n("DropdownItem",{attrs:{name:"750,1181"}},[t._v("750 x 1181")]),n("DropdownItem",{attrs:{name:"750,1333"}},[t._v("750 x 1333")]),n("DropdownItem",{attrs:{name:"800,2000"}},[t._v("800 x 2000")]),n("DropdownItem",{attrs:{name:"1242,2208"}},[t._v("1242 x 2208")])],1)],1)],1),n("Col",{attrs:{span:"6"}},[n("InputNumber",{staticClass:"input ",attrs:{max:1e3,min:50},model:{value:t.$store.state.p.w,callback:function(e){t.$set(t.$store.state.p,"w",e)},expression:"$store.state.p.w"}})],1),n("Col",{attrs:{span:"6"}},[n("InputNumber",{staticClass:"input ",attrs:{max:2e3,min:50},model:{value:t.$store.state.p.h,callback:function(e){t.$set(t.$store.state.p,"h",e)},expression:"$store.state.p.h"}})],1)],1),n("Divider",{attrs:{orientation:"left"}},[n("Tooltip",{attrs:{content:"修改背景颜色和图片"}},[t._v("\n                    背景\n                ")])],1),n("Row",{staticClass:"mt10"},[n("Col",{staticClass:"lh32",attrs:{span:"6"}},[t._v("\n                    背景色\n                ")]),n("Col",{attrs:{span:"6"}},[n("ColorPicker",{attrs:{recommend:""},model:{value:t.$store.state.p.bgc,callback:function(e){t.$set(t.$store.state.p,"bgc",e)},expression:"$store.state.p.bgc"}})],1)],1),n("Row",{staticClass:"mt10"},[n("Col",{staticClass:"lh32",attrs:{span:"6"}},[t._v("\n                    背景图片\n                ")]),n("Col",{attrs:{span:"8"}},[n("Upload",{attrs:{action:t.UPLOAD_URL,"on-success":t.successHandler,headers:{"POSTER-API-UID":"20001"},format:["jpg","jpeg","png"],"show-upload-list":!1}},[n("Button",{attrs:{type:"primary",icon:"ios-cloud-upload-outline"}},[t._v("上传")])],1)],1),n("Col",{attrs:{span:"4"}},[n("Button",{attrs:{type:"primary"},on:{click:t.deleteBgImage}},[t._v("删除背景图")])],1)],1)],1)]),n("setting-item-layout",{directives:[{name:"show",rawName:"v-show",value:"item"==t.currentPanel,expression:"currentPanel == 'item' "}],staticClass:"item-setting"})],1)},pe=[],de=(n("6491"),n("9a33"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return null!=t.currentItem?n("div",{staticClass:"item-setting-panel"},[n("setting-item-base",{attrs:{item:t.currentItem}})],1):t._e()}),fe=[],me=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"setting-item-base"},[n("Divider",{attrs:{orientation:"left"}},[n("Tooltip",{attrs:{"max-width":"200",content:"此处可进行位置和大小的调整"}},[t._v("\n        位置大小\n      ")])],1),n("Row",[n("Col",{attrs:{span:"6"}},[t._v("x")]),n("Col",{attrs:{span:"6"}},[t._v("y")]),n("Col",{attrs:{span:"6"}},[t._v("宽度")]),n("Col",{attrs:{span:"6"}},[t._v("高度")])],1),n("Row",[n("Col",{attrs:{span:"6"}},[n("InputNumber",{staticClass:"input ",attrs:{max:t.w-t.item.w,min:0},model:{value:t.item.x,callback:function(e){t.$set(t.item,"x",e)},expression:"item.x"}})],1),n("Col",{attrs:{span:"6"}},[n("InputNumber",{staticClass:"input ",attrs:{max:t.h-t.item.h,min:0},model:{value:t.item.y,callback:function(e){t.$set(t.item,"y",e)},expression:"item.y"}})],1),n("Col",{attrs:{span:"6"}},[n("InputNumber",{staticClass:"input ",attrs:{max:t.w,min:0},model:{value:t.item.w,callback:function(e){t.$set(t.item,"w",e)},expression:"item.w"}})],1),n("Col",{attrs:{span:"6"}},[n("InputNumber",{staticClass:"input ",attrs:{max:t.h,min:0},model:{value:t.item.h,callback:function(e){t.$set(t.item,"h",e)},expression:"item.h"}})],1)],1),n("Divider",{attrs:{orientation:"left"}},[n("Tooltip",{attrs:{"max-width":"200",content:"点击修改颜色"}},[t._v("颜色")])],1),n("Row",[n("Col",{staticClass:"lh32",attrs:{span:"6"}},[t._v("\n        颜色\n      ")]),n("Col",{attrs:{span:"6"}},[n("color-picker",{attrs:{recommend:""},on:{"on-change":t.changeColor},model:{value:t.item.c,callback:function(e){t.$set(t.item,"c",e)},expression:"item.c"}})],1)],1),n("div",{directives:[{name:"show",rawName:"v-show",value:"image"===t.item.t||"avatar"===t.item.t,expression:"item.t === 'image' || item.t === 'avatar' "}]},[n("Divider",{attrs:{orientation:"left"}},[n("Tooltip",{attrs:{"max-width":"200",content:"图片"}},[t._v("图片")])],1),n("Row",{staticClass:"mt10"},[n("Col",{staticClass:"lh32",attrs:{span:"6"}},[t._v("\n          图片\n        ")]),n("Col",{attrs:{span:"8"}},[n("Upload",{attrs:{action:t.UPLOAD_URL,"on-success":t.successHandler,headers:{"POSTER-API-UID":"20001"},format:["jpg","jpeg","png"],"show-upload-list":!1}},[n("Button",{attrs:{type:"primary",icon:"ios-cloud-upload-outline"}},[t._v("上传")])],1)],1),n("Col",{attrs:{span:"6"}},[n("Button",{on:{click:t.deleteImg}},[t._v("删除")])],1)],1)],1),n("div",{directives:[{name:"show",rawName:"v-show",value:"text"===t.item.t,expression:"item.t === 'text' "}]},[n("Divider",{attrs:{orientation:"left"}},[n("Tooltip",{attrs:{"max-width":"200",content:"拖动修改字体大小"}},[t._v("字体")])],1),n("Row",[n("Col",{staticClass:"lh36",attrs:{span:"6"}},[t._v("\n          字体大小\n        ")]),n("Col",{attrs:{span:"10"}},[n("Slider",{attrs:{min:10},model:{value:t.item.s,callback:function(e){t.$set(t.item,"s",e)},expression:"item.s"}})],1),n("Col",{attrs:{span:"1"}},[t._v("\n           \n        ")]),n("Col",{attrs:{span:"6"}},[n("InputNumber",{staticClass:"input ",attrs:{max:100,min:0},model:{value:t.item.s,callback:function(e){t.$set(t.item,"s",e)},expression:"item.s"}})],1)],1)],1),n("div",[n("Divider",{attrs:{orientation:"left"}},[n("Tooltip",{attrs:{"max-width":"200",content:"静态参数: 效果预览使用，不可变    动态参数: 调用接口使用，可变"}},[t._v("\n          参数\n        ")])],1),n("Row",[n("Col",{attrs:{span:"6"}},[t._v("\n          名称\n        ")]),n("Col",{attrs:{span:"17"}},[n("Input",{model:{value:t.item.name,callback:function(e){t.$set(t.item,"name",e)},expression:"item.name"}})],1)],1),n("Row",[n("Col",{attrs:{span:"6"}},[t._v("\n          静态参数\n        ")]),n("Col",{attrs:{span:"17"}},[n("Input",{attrs:{type:"textarea",rows:4},on:{"on-change":t.changeV},model:{value:t.item.v,callback:function(e){t.$set(t.item,"v",e)},expression:"item.v"}})],1)],1),n("Row",[n("Col",{attrs:{span:"6"}},[t._v("\n          动态参数\n        ")]),n("Col",{attrs:{span:"17"}},[n("Input",{model:{value:t.item.vd,callback:function(e){t.$set(t.item,"vd",e)},expression:"item.vd"}})],1)],1)],1)],1)},he=[];function ve(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function be(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ve(Object(n),!0).forEach((function(e){Object(p["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ye={name:"SettingItemBase",components:{InputNumber:rt["InputNumber"],Row:rt["Row"],Col:rt["Col"],ColorPicker:rt["ColorPicker"],Slider:rt["Slider"],Divider:rt["Divider"],Tooltip:rt["Tooltip"],Input:rt["Input"],Checkbox:rt["Checkbox"]},props:{item:{}},data:function(){return{UPLOAD_URL:window.UPLOAD_URL}},computed:be({},Object(v["b"])(["w","h"]),{strikethrough:{get:function(){return this.item.st>=1},set:function(t){this.item.st=t?Number((this.item.s/10).toFixed(0)):0}}}),methods:{isQrcode:function(){return"qrcode"===this.item.t},changeColor:function(t){this.isQrcode()&&K(this.item.uuid,"buildQrcode")},changeBgColor:function(t){this.isQrcode()&&K(this.item.uuid,"buildQrcode")},deleteImg:function(t){this.item.v=""},changeV:function(){this.isQrcode()&&K(this.item.uuid,"buildQrcode")},successHandler:function(t,e){var n=this;if(0!==t.code)console.info("res=",t);else{var r=t.url;if(r.startsWith("http")||(r=API_URL+r),"avatar"===n.item.t)return void(n.item.v=r);var o=new Image;o.src=r;var a=400,i=setInterval((function(){a--<=0&&window.clearInterval(i),o.width>0&&(n.item.v=r,n.item.x=0,n.item.y=0,n.item.w=o.width,n.item.h=o.height,window.clearInterval(i))}),50)}}}},ge=ye,we=(n("db58"),Object(P["a"])(ge,me,he,!1,null,null,null)),Oe=we.exports;function je(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Pe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?je(Object(n),!0).forEach((function(e){Object(p["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ce={name:"ItemSettingPanel",components:{SettingItemBase:Oe},computed:Pe({},Object(v["b"])(["items","currentPanel","currentItem"]))},xe=Ce,_e=Object(P["a"])(xe,de,fe,!1,null,"14f4cbae",null),Ie=_e.exports;function Se(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ke(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Se(Object(n),!0).forEach((function(e){Object(p["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var De={name:"SettingLayout",components:{SettingItemLayout:Ie,SettingLayer:Ot,InputNumber:rt["InputNumber"],Row:rt["Row"],Col:rt["Col"],ColorPicker:rt["ColorPicker"],Slider:rt["Slider"],Divider:rt["Divider"],Tooltip:rt["Tooltip"],Dropdown:rt["Dropdown"],Icon:rt["Icon"],DropdownMenu:rt["DropdownMenu"],DropdownItem:rt["DropdownItem"],Button:rt["Button"],Upload:rt["Upload"]},data:function(){return{UPLOAD_URL:window.UPLOAD_URL}},computed:ke({},Object(v["b"])(["items","currentPanel","ciuuid"])),methods:ke({},Object(v["c"])(["switchPanel","activeItemDontShow","changeWH","changeBgImage"]),{itemChange:function(t){if(t){var e=Number(t.split(",")[0]),n=Number(t.split(",")[1]);this.changeWH({w:e,h:n})}},deleteBgImage:function(){this.changeBgImage("")},successHandler:function(t,e){var n=this;if(0!==t.code)console.info("res=",t);else{var r=t.url;r.startsWith("http")||(r=API_URL+r);var o=new Image;o.src=r;var a=400,i=setInterval((function(){a--<=0&&window.clearInterval(i),o.width>0&&(n.changeBgImage(r),n.changeWH({w:o.width,h:o.height}),window.clearInterval(i))}),50)}}})},Ee=De,Ke=(n("ffea"),n("eecd"),Object(P["a"])(Ee,le,pe,!1,null,"4953a690",null)),Re=Ke.exports,$e=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"debug-layout",class:{active:t.show},on:{dblclick:function(e){t.show=!t.show}}},[n("pre",[t._v(t._s(t.json))])])},Le=[];function Me(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Te(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Me(Object(n),!0).forEach((function(e){Object(p["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Be={name:"DebugLayout",data:function(){return{}},computed:Te({},Object(v["b"])(["ciuuid","items","debug","json"]),{show:{get:function(){var t=!0;return t&&this.debug},set:function(t){this.$store.state.p.editor.debug=Boolean(t)}}}),methods:{}},Ue=Be,He=(n("f53d"),Object(P["a"])(Ue,$e,Le,!1,null,"173f3c7b",null)),Ae=He.exports,Ne=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"top-bar-layout"},[n("div",{staticClass:"left-bsar"},[n("div",{staticClass:"main-title",attrs:{title:"方便程序员开发动态海报"}},[t._v("Fast海报生成器V1.3.0")]),n("span",{staticClass:"btn-icon icon iconfont icon-new",attrs:{title:"新建海报"},on:{click:t.newPosterHandler}}),n("span",{staticClass:"btn-icon icon iconfont icon-save1",attrs:{title:"保存海报"},on:{click:t.savePoster}}),n("span",{directives:[{name:"show",rawName:"v-show",value:"saving"==t.editor.saveStatus,expression:"editor.saveStatus == 'saving'"}],staticClass:"text-saved"},[t._v("正在保存...")]),n("span",{directives:[{name:"show",rawName:"v-show",value:"saved"==t.editor.saveStatus,expression:"editor.saveStatus == 'saved'"}],staticClass:"text-saved"},[t._v(t._s((new Date).format("hh:mm:ss")+"  已保存"))])]),n("div",{staticClass:"right-bar"})])},qe=[],ze=n("1345");function Je(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Fe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Je(Object(n),!0).forEach((function(e){Object(p["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var We={name:"TopBarLayout",components:{LoginModal:ze["default"],Dropdown:rt["Dropdown"],DropdownMenu:rt["DropdownMenu"],Icon:rt["Icon"],DropdownItem:rt["DropdownItem"],Divider:rt["Divider"],Drawer:rt["Drawer"],Modal:rt["Modal"]},data:function(){return{m:{showLoginModal:!1,showFeedbackModal:!1},posters:[],saveTips:""}},computed:Fe({},Object(v["b"])(["currentUser","json","editor"])),methods:Fe({},Object(v["c"])(["logout","changePoster","newPoster","reloadMyPoster","savePoster"]),{logoutNow:function(){this.m.showLoginModal=!1,this.logout()},newPosterHandler:function(){var t=this;this.$Modal.confirm({title:"温馨提示",content:"<p>请在新建海报前，保存当前修改。</p>",onOk:function(){t.newPoster()}})},feedback:function(){this.m.showFeedbackModal=!0}})},Ge=We,Qe=(n("3a85"),Object(P["a"])(Ge,Ne,qe,!1,null,"a9f5f5c0",null)),Ve=Qe.exports,Xe={name:"PosterLayout",components:{TopBarLayout:Ve,ContentWrapper:tt,ToolLayout:ue,SettingLayout:Re,DebugLayout:Ae},mounted:function(){window.app=this},methods:{}},Ye=Xe,Ze=(n("607f"),Object(P["a"])(Ye,s,c,!1,null,null,null)),tn=Ze.exports,en={name:"home",components:{PosterLayout:tn},mounted:function(){},computed:{},data:function(){return{}}},nn=en,rn=(n("5155"),Object(P["a"])(nn,a,i,!1,null,"7b53bb80",null)),on=rn.exports,an=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"top"},[t._v("\n        演示以Vue组件方式嵌入系统中\n    ")]),n("div",{staticClass:"nav-bar"},t._l(10,(function(e){return n("div",{staticClass:"nav-item"},[t._v("\n            菜单： "+t._s(e)+"\n        ")])})),0),n("div",{staticClass:"content-container"},[n("poster-layout")],1)])},sn=[],cn={name:"B",components:{PosterLayout:tn},mounted:function(){},methods:{}},un=cn,ln=(n("6a03"),Object(P["a"])(un,an,sn,!1,null,null,null)),pn=ln.exports,dn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"top"},[t._v("\n        演示以Iframe方式嵌入系统中(推荐使用)\n    ")]),n("div",{staticClass:"nav-bar"},t._l(10,(function(e){return n("div",{staticClass:"nav-item"},[t._v("\n            菜单： "+t._s(e)+"\n        ")])})),0),t._m(0)])},fn=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-container"},[n("iframe",{attrs:{src:"/"}})])}],mn={name:"B2",components:{},mounted:function(){},methods:{}},hn=mn,vn=(n("f2ee"),Object(P["a"])(hn,dn,fn,!1,null,null,null)),bn=vn.exports;r["default"].use(o["a"]);var yn=new o["a"]({routes:[{path:"/",name:"home",component:on},{path:"/login",name:"login",component:function(){return n.e("about").then(n.bind(null,"1345"))}},{path:"/b",name:"b",component:pn},{path:"/b2",name:"b2",component:bn},{path:"/about",name:"about",component:function(){return n.e("about").then(n.bind(null,"8166"))}}]});yn.beforeEach((function(t,e,n){0===t.matched.length?e.name?n({name:e.name}):n("/"):n()}));e["a"]=yn},"478d":function(t,e,n){"use strict";var r=n("088f"),o=n.n(r);o.a},5155:function(t,e,n){"use strict";var r=n("bc02"),o=n.n(r);o.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e44b"),n("6648"),n("5f54"),n("f0e6");var r=n("0261"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},a=[],i=(n("7c55"),n("623f")),s={},c=Object(i["a"])(s,o,a,!1,null,null,null),u=c.exports,l=n("41cb"),p=(n("5ab2"),n("e10e"),n("6491"),n("cc57"),n("163d"),n("6d57"),n("ac9f")),d=(n("c904"),n("8876"));n("9dd9"),n("9a33"),n("2b45"),n("f548");function f(t,e){var n,r,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),a=[];if(e=e||o.length,t)for(n=0;n<t;n++)a[n]=o[0|Math.random()*e];else for(a[8]=a[13]=a[18]=a[23]="-",a[14]="4",n=0;n<36;n++)a[n]||(r=0|16*Math.random(),a[n]=o[19==n?3&r|8:r]);return a.join("")}Date.prototype.format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[n]:("00"+e[n]).substr((""+e[n]).length)));return t};var m=function(){return f(8)},h=n("82ae"),v=n.n(h),b=n("82c6"),y=n.n(b),g=n("0f5e"),w=n.n(g);function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function j(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){Object(p["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var P=v.a.create({baseURL:window.API_URL,timeout:3e4,withCredentials:!0});P.interceptors.request.use((function(t){t.headers["token"]=localStorage.getItem("token");var e={_t:(new Date).getTime()};return"get"===t.method?w()(t.params)&&(t.params=j({},e,{},t.params)):"post"===t.method&&(w()(t.data)&&(t.data=j({},e,{},t.data)),/^application\/x-www-form-urlencoded/.test(t.headers["content-type"])&&(t.data=y.a.stringify(t.data))),t}),(function(t){return Promise.reject(t)})),P.interceptors.response.use((function(t){return 401===t.status&&console.info("没有登录"),t.data&&401===t.data.code&&(console.warn("没有登录"),l["a"].replace({name:"login"})),t}),(function(t){return console.error(t),Promise.reject(t)}));var C=P;function x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?x(Object(n),!0).forEach((function(e){Object(p["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}r["default"].use(d["a"]);var I=1.2,S=.25,k=.5,D=!1,E=80,K=new d["a"].Store({state:{p:{name:"未命名",id:0,w:720,h:1280,bgc:"#fff",type:"jpeg",quality:E,bgUrl:"",items:[],editor:{scale:k,cp:"canvas",ciuuid:"",debug:D,saveStatus:"draft",sidebar:{showExtendBar:!1}}},user:null,copyItem:null,posters:[]},getters:{debug:function(t){return t.p.editor.debug},W:function(t){return t.p.w*t.p.editor.scale},H:function(t){return t.p.h*t.p.editor.scale},w:function(t){return t.p.w},h:function(t){return t.p.h},BGC:function(t){return t.p.bgc},BGURL:function(t){return t.p.bgUrl},items:function(t){return t.p.items},scale:function(t){return t.p.editor.scale},currentPanel:function(t){return t.p.editor.cp},currentItem:function(t){return t.p.items.filter((function(e){return e.uuid===t.p.editor.ciuuid}))[0]},ciuuid:function(t){return t.p.editor.ciuuid},json:function(t){var e=JSON.parse(JSON.stringify(t.p));e.items.sort((function(t,e){return t.z-e.z}));for(var n=0;n<e.items.length;n++)e.items[n].z=n+1;return JSON.stringify(e,"\r"," ")},currentUser:function(t){return t.user},accessKey:function(t){return t.user?t.user.accessKey:""},secretKey:function(t){return t.user?t.user.secretKey:""},posterId:function(t){return t.p.id},sidebar:function(t){return t.p.editor.sidebar},editor:function(t){return t.p.editor},posters:function(t){return t.posters}},mutations:{addItem:function(t,e){if(t.p.items.length>=10)console.error("对不起, 暂时只支持添加10个元素。请联系客服开通权限。");else{var n={uuid:m(),x:400,y:200,w:150,h:150,z:1,s:15,c:"#000000",bgc:"",v:"https://poster.prodapi.cn/static/images/xiaoniu.png",vd:"",fn:"",st:0,active:!1};n=_({},e,{},n),n.x=~~(t.p.w/2-n.w/2),n.y=~~(t.p.h/2-n.h/2),"text"===n.t&&(n.w=324,n.h=58,n.s=24,n.x=120,n.y=200,n.v="多行文本测试1多行文本测试2多行文本测试3多行文本测试4"),"image"===n.t&&(n.w=200,n.h=200),"qrcode"===n.t&&(n.p=0,n.c="#000000",n.bgc="#ffffff",n.v="https://poster.prodapi.cn/#from=qrcode"),"avatar"===n.t&&(n.w=80,n.h=80,n.c="#888888");var r=Math.max.apply(Math,t.p.items.map((function(t){return t.z})));r>=1&&(n.z=r+1),t.p.items.push(n),K.commit("activeItemAndShowProperty",n.uuid)}},copyItem:function(t,e){var n=t.p.items.filter((function(t){return t.uuid===e}))[0];t.copyItem=_({},n)},pasteItem:function(t,e){if(t.copyItem){t.copyItem.uuid=m();var n=t.copyItem;n.x=n.x+24,n.y=n.y+24;var r=Math.max.apply(Math,t.p.items.map((function(t){return t.z})));r>=1&&(n.z=r+1),t.p.items.push(n),K.commit("activeItemAndShowProperty",n.uuid)}},deactiveAllItem:function(t,e){t.p.items.forEach((function(t){return t.active=!1}))},activeItemDontShow:function(t,e){K.commit("activeItem",e),t.p.editor.cp="item"},activeItemAndShowProperty:function(t,e){K.commit("activeItem",e),t.p.editor.cp="item"},activeItem:function(t,e){t.p.editor.ciuuid!==e&&(t.p.items.forEach((function(t){t.active=t.uuid===e})),t.p.editor.ciuuid=e)},removeItem:function(t,e){var n=[];t.p.items.forEach((function(t){t.uuid!==e&&n.push(t)})),n.length>=1&&(n[0].active=!0,t.p.editor.ciuuid=n[0].uuid),t.p.items=n},switchPanel:function(t,e){t.p.editor.cp=e},adjustScale:function(t,e){var n=t.p.editor.scale;n+=e,n=Number(n.toFixed(2)),n<S||n>I?console.warn("缩放比达到极限"):t.p.editor.scale=n},autoScale:function(t,e){t.p.scale=.6},itemUp:function(t,e){var n=t.p.items.filter((function(t){return t.uuid===e}))[0],r=n.z,o=Math.max.apply(Math,t.p.items.map((function(t){return t.z})));if(o!==r){var a=r+1,i=t.p.items.filter((function(t){return t.z===a&&t.uuid!==e}));if(i&&0!==i.length){var s=i[0];n.z=a,s.z=r}else console.warn("元素上移(没有匹配的元素): z="+r+", uuid="+e)}else console.warn("元素上移(元素已经到了最上面): z="+r+", uuid="+e)},itemDown:function(t,e){var n=t.p.items.filter((function(t){return t.uuid===e}))[0],r=n.z;if(!(r<=1)){var o=r-1,a=t.p.items.filter((function(t){return t.z===o&&t.uuid!==e}));if(a&&0!==a.length){var i=a[0];n.z=o,i.z=r}}},changeWH:function(t,e){t.p.w=e.w,t.p.h=e.h},changeBgImage:function(t,e){t.p.bgUrl=e},login:function(t,e){localStorage.setItem("token",e.token),localStorage.setItem("user",JSON.stringify(e.user,""," ")),t.user=e.user},logout:function(t,e){t.user=null,localStorage.removeItem("token"),localStorage.removeItem("user")},changePoster:function(t,e){var n=e.id,r=e.name;e=JSON.parse(e.json),e.items.forEach((function(t){t.uuid=t.uuid?t.uuid:m()})),e.editor=e.editor?e.editor:t.p.editor,e.editor.sidebar=e.editor.sidebar?e.editor.sidebar:t.p.editor.sidebar,e.editor.saveStatus=e.editor.saveStatus?e.editor.saveStatus:"draft",e.id=n,e.name=r,t.p=e,window.setTimeout((function(){K.commit("adjustScale",.01)}),100),window.setTimeout((function(){K.commit("adjustScale",-.01)}),200)},newPoster:function(t,e){var n={name:"未命名",id:0,w:720,h:1280,bgc:"#ffffff",type:"jpeg",quality:E,bgUrl:"",items:[],editor:{scale:k,cp:"canvas",ciuuid:"",debug:D,saveStatus:"draft",sidebar:{showExtendBar:t.p.editor.sidebar.showExtendBar}}};t.p=n},reloadMyPoster:function(t,e){C.get("api/user/posters",{},{headers:{"content-type":"application/x-www-form-urlencoded"}}).then((function(e){var n=e.data;n.posters.forEach((function(t){return t.preview=(t.preview.startsWith("http")?t.preview:window.API_URL+t.preview)+"?t="+(new Date).getTime()})),t.posters=n.posters}))},savePoster:function(t,e){var n={};n.id=t.p.id,n.json=K.getters.json,n.name=t.p.name,n.quality=t.p.quality,t.p.editor.saveStatus="saving",C.post("api/user/posters",n).then((function(n){var r=n.data;0!==r.code&&alert(r.msg),r.id&&(t.p.id=r.id),t.p.editor.saveStatus="saved",K.commit("reloadMyPoster",t,e)}))}},actions:{}}),R=localStorage.getItem("user");R&&(R=JSON.parse(R),K.state.user=R);var $=K,L=n("7b1d"),M=n.n(L),T=n("4062"),B=n.n(T),U=(n("f3ca"),n("0c97"),n("d6b1")),H=n.n(U);r["default"].prototype.$http=C,r["default"].component("vue-drag-resize",M.a),r["default"].use(H.a),r["default"].use(B.a),r["default"].config.productionTip=!1,new r["default"]({router:l["a"],store:$,render:function(t){return t(u)}}).$mount("#app")},"607f":function(t,e,n){"use strict";var r=n("fbd1"),o=n.n(r);o.a},"63b9":function(t,e,n){},"64d1":function(t,e,n){"use strict";var r=n("09f2"),o=n.n(r);o.a},"6a03":function(t,e,n){"use strict";var r=n("ec15"),o=n.n(r);o.a},"6d7a":function(t,e,n){},7894:function(t,e,n){},"7c55":function(t,e,n){"use strict";var r=n("d9c2"),o=n.n(r);o.a},"83cb":function(t,e,n){"use strict";var r=n("63b9"),o=n.n(r);o.a},"8f93":function(t,e,n){"use strict";var r=n("d72f"),o=n.n(r);o.a},9841:function(t,e,n){},a182:function(t,e,n){},a61c:function(t,e,n){},aa98:function(t,e,n){"use strict";var r=n("1d84"),o=n.n(r);o.a},b12e:function(t,e,n){},ba68:function(t,e,n){t.exports=n.p+"img/no-img.3679ff87.svg"},bc02:function(t,e,n){},c3fa:function(t,e,n){"use strict";var r=n("b12e"),o=n.n(r);o.a},c4de:function(t,e,n){},c715:function(t,e,n){"use strict";var r=n("02ac"),o=n.n(r);o.a},c7b4:function(t,e,n){},d1fa:function(t,e,n){"use strict";var r=n("a61c"),o=n.n(r);o.a},d65f:function(t,e,n){},d72f:function(t,e,n){},d9c2:function(t,e,n){},db58:function(t,e,n){"use strict";var r=n("c4de"),o=n.n(r);o.a},ddd2:function(t,e,n){},ea17:function(t,e,n){},ec15:function(t,e,n){},eecd:function(t,e,n){"use strict";var r=n("9841"),o=n.n(r);o.a},f2ee:function(t,e,n){"use strict";var r=n("6d7a"),o=n.n(r);o.a},f53d:function(t,e,n){"use strict";var r=n("c7b4"),o=n.n(r);o.a},f59e:function(t,e,n){"use strict";var r=n("ddd2"),o=n.n(r);o.a},f881:function(t,e,n){"use strict";var r=n("d65f"),o=n.n(r);o.a},fbd1:function(t,e,n){},ffea:function(t,e,n){"use strict";var r=n("1a90"),o=n.n(r);o.a}});